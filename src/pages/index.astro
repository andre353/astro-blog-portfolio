---
import MainLayout from "../layouts/MainLayout.astro";
import PostCard from "../components/PostCard.astro";
import Link from "../components/Link.astro";

import {formatBlogPosts} from "../js/utils.js";
const allPosts = await Astro.glob("./blog/*.md");
const formattedPosts = formatBlogPosts(allPosts, {
  limit: 3
});
---

<MainLayout title="Home" description="My Home Page">
  <section class="container about" aria-label="About Me">
    <img
      src="/images/headshot.webp"
      alt="My headshot"
      width="200"
      height="330"
    />
    <div class="content">
      <h1 class="h1">My Blog</h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Magnam deleniti soluta molestiae, reprehenderit, similique deserunt facere odio amet excepturi quae iure mollitia quisquam sunt debitis necessitatibus perspiciatis eum consequuntur eligendi quo illum quasi?
      </p>
      <Link
        href="/about/"
        style="secondary"
        text="ðŸ‘‹ About Me"
      />
    </div>
  </section>
  <section class="container" aria-label="New Blog Posts">
    <h2 class="h1">New Blog Posts</h2>
    <div class="post-container">
      {
        formattedPosts.map((post) => 
          <PostCard
            frontmatter={post.frontmatter}
            url={post.url}
            tagType="h3"
          />
        )
      }
    </div>
  </section>
</MainLayout>
